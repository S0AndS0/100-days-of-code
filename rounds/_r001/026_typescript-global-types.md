---
layout: post
title: TypeScript Global Types
date: 2021-01-30 21:40:23 -0800
#date_updated:  # Optional and formatted like 'date' above
description: How to declare types such that importing is unnecessary
time_to_live: 1800

github:
  repo:
    url: https://github.com/S0AndS0/100-days-of-code/
    title: GitHub repository that builds this site

tweet:
  url: https://twitter.com/S0_And_S0/status/1355755797821747202
  title: Link to Tweet for this post

attribution:
  links:
    - text: Medium -- Understanding TypeScript Configuration Options -- `typeRoots`
      href: https://medium.com/javascript-in-plain-english/typescript-configuration-options-tsconfig-json-561d4a2ad4b#460e
      title: Understanding TypeScript Configuration Options -- `typeRoots`
---



Recently I ran into the use case of needing to define type hints in such a way that did not require `import` or `require` within scripts. This post contains example configurations and scripts that demonstrate how to achieve such type declarations.


If following along be sure to issue the next few commands prior to utilizing example files...


```bash
git init counter

cd counter

npm init

npm install @types/jest @types/node jest ts-jest typescript
```


> **Note**, a more complex example may be cloned from GitHub at [`javascript-utilities/iterator-cascade-callbacks`][javascript_utilities__iterator_cascade_callbacks]


---


- [Configurations][heading__configurations]

- [Source Code][heading__source_code]

- [JestJS Tests][heading__jestjs_tests]

- [Custom Types][heading__custom_types]

- [Contact and/or Contribute][heading__contact_andor_contribute]

- [Attribution](#heading__attribution)


---


## Configurations
[heading__configurations]: #configurations "Example configuration files"


**`tsconfig.json`**


```json
{
  "compilerOptions": {
    "outDir": "",
    "target": "es6",
    "module": "es6",
    "lib": [ "dom", "es2017" ],
    "sourceMap": true,
    "strictNullChecks": true,
    "noImplicitAny": true,
    "moduleResolution": "node"
  }
}
```


> **`tsconfig.json` Notes**
>
> If utilizing a `includes` list, then custom types, such as `@types/fibonacci` defined within the [Custom Types][heading__custom_types] example section, should be added to that list.


**`package.json` (snip)**


```json
  "main": "fibonacci.js",
  "scripts": {
    "ts-build": "tsc --build",
    "ts-watch": "tsc --watch",
    "ci-test": "jest --coverage",
    "ci-build": "npm run ts-build && npm run ci-test",
    "ci-watch": "jest --coverage --watchAll"
  },
  "jest": {
    "verbose": true,
    "testEnvironment": "jsdom",
    "roots": [
      "__tests__"
    ],
    "collectCoverageFrom": [
      "fibonacci.js"
    ],
    "coveragePathIgnorePatterns": [
      "node_modules/"
    ],
    "coverageThreshold": {
      "global": {
        "statements": 100,
        "branches": 100,
        "functions": 100,
        "lines": 100
      }
    },
    "coverageReporters": [
      "text"
    ]
  }
```


> **`package.json` Notes**
>
> The `scripts` key should replace defaults generated by _`npm init`_ command


______


## Source Code
[heading__source_code]: #source-code "Example source code"


**`ts/fibonacci.ts`**


```typescript
'use strict';


class Fibonacci implements Fibonacci {
  constructor() {
    this.done = false;
    this.value = 0;
    this.last = 1;
  }

  next(): Fibonacci {
    const new_value = this.last + this.value;
    this.last = this.value;
    this.value = new_value;
    return this;
  }

  [Symbol.iterator]() {
    return this;
  }
}


/* istanbul ignore next */
if (typeof module !== 'undefined') {
  module.exports = {
    Fibonacci,
  };
}


interface Fibonacci extends Fib_Types.Fibonacci {}
```


> **`ts/fibonacci.ts` Notes**
>
> The `interface Fibonacci extends Fib_Types.Fibonacci {}` line mitigates certain TypeScript errors, while also allowing for future script level customization


______


## JestJS Tests
[heading__jestjs_tests]: #jestjs-tests "Example JestJS tests"


**`ts/__tests__/tests-fibonacci.ts`**


```typescript
#!/usr/bin/env node


'use strict';


class Tests__Fibonacci {
  constructor() {
    this.fibonacci = require('../fibonacci').Fibonacci;
  }

  runTests() {
    this.testsConstructor();
    this.testsIterator();
  }

  testsConstructor() {
    test('', () => {
      const fibonacci = new this.fibonacci();
      expect(fibonacci).toBeDefined();
    });
  }

  testsIterator() {
    test('', () => {
      const fibonacci = new this.fibonacci();
      let count = 0;
      let limit = 10;
      let last = 0;
      for (const value of fibonacci) {
        expect(value).toBeGreaterThanOrEqual(last);
        last = value;
        count++;
        if (count > limit) {
          break;
        }
      }
    });
  }
}


const tests_fibonacci = new Tests__Fibonacci();
tests_fibonacci.runTests();


interface Tests__Fibonacci {
  fibonacci: Fib_Types.Fibonacci;
}
```


______


## Custom Types
[heading__custom_types]: #custom-types "Example global type hints"


**`@types/fibonacci/fibonacci.d.ts`**


```typescript
export {};


declare global {
  namespace Fib_Types {
    interface Fibonacci {
      /* Properties */
      done: boolean;
      value: number;
      last: number;

      /* Methods */
      new(): Fibonacci;
      next(): Fibonacci;
      [Symbol.iterator](): Fibonacci;
    }
  }
}
```


> **`@types/fibonacci/fibonacci.d.ts` Notes**
>
> - The `export {};` line is required to avoid certain TypeScript errors
>
> - The `declare global {}` block is what notifies TypeScript that namespaces and types should be available to all scripts

______


## Contact and/or Contribute
[heading__contact_andor_contribute]: #contact-andor-contribute


For quick questions or suggestions you may reach out on [Twitter][link__twitter__s0_and_s0]. And to report mistakes, or provide corrections, please utilize [GitHub][link__github__s0ands0__100_days_of_code] to either open an Issue or Pull Request for this repository.


______



[link__github__s0ands0__100_days_of_code]: {{ page.github.repo.url }} "{{ page.github.repo.title }}"

[link__twitter__s0_and_s0]: {{ page.tweet.url }} "{{ page.tweet.title }}"

[javascript_utilities__iterator_cascade_callbacks]: https://github.com/javascript-utilities/iterator-cascade-callbacks "Iterator that chains callback function execution"

