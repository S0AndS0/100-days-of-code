---
layout: post
title: TypeScript Extends `tsconfig`
date: 2021-01-29 21:03:50 -0800
date_updated: 2021-01-30 21:03:50 -0800
description: Multiple configuration files for a TypeScript project
time_to_live: 1800

github:
  repo:
    url: https://github.com/S0AndS0/100-days-of-code/
    title: GitHub repository that builds this site

tweet:
  url: https://twitter.com/S0_And_S0/status/1355387125341036544
  title: Link to Tweet for this post

attribution:
  links:
    - text: StackOverflow -- How to use multiple tsconfig files in vs code
      href: https://stackoverflow.com/questions/37579969/
      title: How to use multiple tsconfig files in vs code
      class: fa fa-stack-overflow
---



Multiple configuration files for a TypeScript project can be a bit tricky to setup, but is occasionally required for TypeScript projects that involve front-end and back-end code within the same repository. This post covers an example project setup that had slightly different configurations for CI (Continuous Integration) tests, and source code, transpiling.


If following along be sure to issue the next few commands prior to utilizing example files...


```bash
git init counter

cd counter

npm init

npm install @types/jest @types/node jest ts-jest typescript
```


> **Note**, a more complex example may be cloned from GitHub at [`web-dev-examples/api-list-path`][link__web_dev_examples__api_list_path]


---


- [Configurations][heading__configurations]

- [Source Code][heading__source_code]

- [JestJS Tests][heading__jestjs_tests]

- [Contact and/or Contribute][heading__contact_andor_contribute]

- [Attribution](#heading__attribution)


---


## Configurations
[heading__configurations]: #configurations "Example configuration files"


> Example configuration files


**`tsconfig.json`**


```json
{
  "compilerOptions": {
    "target": "es6",
    "lib": [ "dom", "es2017" ],
    "sourceMap": true,
    "strictNullChecks": true,
    "noImplicitAny": true,
    "moduleResolution": "node"
  },
  "include": [
    "ts/**/*.ts"
  ]
}
```


**`tsconfig.jest.json`**


```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "__tests__",
    "module": "commonjs"
  },
  "exclude": [
    "node_modules",
    "ts/index.ts"
  ]
}
```

**`tsconfig.source.json`**


```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "",
    "module": "es6"
  },
  "exclude": [
    "node_modules",
    "ts/__tests__"
  ]
}
```


> **`tsconfig` Notes**
>
> - The `outDir` key for `tsconfig.source.json` and `tsconfig.jest.json` files are different
>
> - The `module` key for `tsconfig.source.json` and `tsconfig.jest.json` files are different
>
> - The `exclude` list for `tsconfig.source.json` and `tsconfig.jest.json` files are set to exclude each other's files


**`package.json` (snip)**


```json
  "scripts": {
    "ts-build": "npm run ts-build-jest && npm run ts-build-source",
    "ts-build-jest": "tsc --project tsconfig.jest.json",
    "ts-build-source": "tsc --project tsconfig.source.json",
    "ts-watch-jest": "tsc --project tsconfig.jest.json --watch",
    "ts-watch-source": "tsc --project tsconfig.source.json --watch",
    "ci-test": "jest --coverage",
    "ci-build": "npm run ts-build && npm run ci-test"
  },
  "jest": {
    "verbose": true,
    "testEnvironment": "jsdom",
    "roots": [
      "__tests__"
    ],
    "collectCoverageFrom": [
      "iterator-cascade-callbacks.js"
    ],
    "coveragePathIgnorePatterns": [
      "node_modules/"
    ],
    "coverageThreshold": {
      "global": {
        "statements": 100,
        "branches": 100,
        "functions": 100,
        "lines": 100
      }
    },
    "coverageReporters": [
      "text"
    ]
  }
```


> **`package.json` Notes**
>
> The `scripts` key should replace defaults generated by _`npm init`_ command
>
> The `jest` key should be added to the `package.json` file
>
> The `ts-build-jest` and `ts-watch-jest` scripts are where `tsconfig.jest.json` configuration file is defined to be used
>
> The `ts-build-source` and `ts-watch-source` scripts are where `tsconfig.source.json` configuration file is defined to be used


______


## Source Code
[heading__source_code]: #source-code "Example source code"


> Example source code


```typescript
'use strict';


class Counter {
  value: number;
  done: boolean;

  constructor(value?: number | undefined) {
    this.value = isNaN(Number(value))? 0: Number(value);
    this.done = false;
  }

  next() {
    this.value++;
    return this;
  }

  [Symbol.iterator]() {
    return this;
  }
}


/* istanbul ignore next */
if (typeof module !== 'undefined') {
  module.exports = {
    Counter,
  };
}
```


> **Source Code Notes**
>
> The `if (type module !== 'undefined')` check allows for the script to be used either by web-browsers or NodeJS

______


## JestJS Tests
[heading__jestjs_tests]: #jestjs-tests "Example JestJS tests"


> Example JestJS tests


```typescript
#!/usr/bin/env node


'use strict';


class Tests__Counter implements Tests__Counter {
  constructor() {
    this.counter = require('../index').Counter;
  }

  runTests() {
    this.testsConstructor();
    this.testsCounter();
  }

  testsConstructor() {
    test('constructor -> Undefined value at initalization?', () => {
      const counter = new this.counter();
      expect(counter).toBeDefined();
    });
  }

  testsCounter() {
    test('Counter -> Count from `0` till `9`', () => {
      let counted = 0;
      const counter = new this.counter(-1);
      for (const count of counter) {
        expect(count).toBe(counted);
        counted++;
        if (counted > 9) {
          break;
        }
      }
    });
  }
}


const test_counter = new Tests__Counter();
test_counter.runTests();


interface Tests__Counter {
  counter: Counter;
}


interface Counter {
  value: number;
  new(value?: number): Counter;
  next(): Counter;
  [Symbol.iterator](): Counter;
}
```


> **JestJS Tests**
>
> The `interface Counter` definition is necessary to clue TypeScript in on the _shape_ of `Counter`


______


## Contact and/or Contribute
[heading__contact_andor_contribute]: #contact-andor-contribute


For quick questions or suggestions you may reach out on [Twitter][link__twitter__s0_and_s0]. And to report mistakes, or provide corrections, please utilize [GitHub][link__github__s0ands0__100_days_of_code] to either open an Issue or Pull Request for this repository.


______



[link__github__s0ands0__100_days_of_code]: {{ page.github.repo.url }} "{{ page.github.repo.title }}"

[link__twitter__s0_and_s0]: {{ page.tweet.url }} "{{ page.tweet.title }}"

[link__web_dev_examples__api_list_path]: https://github.com/web-dev-examples/api-list-path "ExpressJS example server and client API"

